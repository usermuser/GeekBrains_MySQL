mysql -u root -p

CREATE SCHEMA `lesson2`;

CREATE DATABASE IF NOT EXISTS `lesson2`;

USE `lesson2`;

CREATE TABLE IF NOT EXISTS `depart` (
`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
`name` VARCHAR(40) NOT NULL,
`count` INT DEFAULT 0,
`head_id` INT 
);

CREATE TABLE IF NOT EXISTS `shtat` (
`id` INT NOT NULL AUTO_INCREMENT,
`name` VARCHAR(25) NOT NULL,
`lastname` VARCHAR(30) NOT NULL,
`otdel` INT,
`zp` INT,
PRIMARY KEY (`id`)
)DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

#SHOW DATABASES;
#SHOW TABLES;
SHOW INDEX FROM `depart`;

CREATE INDEX `name_lastname` ON `shtat`(`name`, `lastname`);

SHOW INDEX FROM `shtat`;

ALTER TABLE `depart` ADD INDEX `depname` (`name`);

ALTER TABLE `shtat` ADD COLUMN `birthday` DATE AFTER `lastname`;

ALTER TABLE `shtat` 
ADD FOREIGN KEY (`otdel`)
REFERENCES `depart`(`id`)
ON UPDATE CASCADE
ON DELETE RESTRICT;

ALTER TABLE `depart` CONVERT TO CHAR SET utf8mb4 COLLATE utf8mb4_unicode_ci;

ALTER TABLE `depart` AUTO_INCREMENT=1;

ALTER TABLE `shtat` CHANGE `birthday` `bday` DATE AFTER `zp`;

ALTER DATABASE `lesson2` DEFAULT CHAR SET utf8mb4 COLLATE utf8mb4_unicode_ci;

#DROP DATABASE `december`;
#DROP TABLE `shtat`;
#TRUNCATE TABLE `depart`;
DROP SCHEMA `lesson2`;

